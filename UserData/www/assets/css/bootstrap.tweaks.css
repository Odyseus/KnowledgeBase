/*****************
 * General tweaks.
 *****************/
body {
    margin-bottom: 0.7em;
    /* Kepp scrollbars visible because I hate all the elements in the page dancing around. */
    overflow-y: scroll;
}

div.boxed {
    padding: 15px;
}

#KB_main-content-wrapper {
    position: relative;
    min-height: 100%;
}

/* Content body tweaks. */
#KB_content {
    /* To actually display the boxed layout. */
    margin-bottom: 50px;
    height: 100%;
}

/* For Back To Top Button */
#to-top-of-page {
    bottom: 0;
    display: none;
    font-size: 2.5em;
    margin: 0;
    outline: none;
    padding: 0;
    position: fixed;
    right: 1rem;
    text-decoration: none;
    z-index: 999999;
}

#to-top-of-page:hover {
    opacity: 0.5 !important;
}

/* Add padding to the bottom so the pagination isn't at the edge of the page. */
#KB_mainarea {
    padding-bottom: 0.5em !important;
}

/* The loading message centered on screen. */
/* stylelint-disable declaration-block-no-duplicate-properties */
#KB_loading > .message {
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
    color: white;
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -webkit-flex-direction: column;
    -ms-flex-direction: column;
    flex-direction: column;
    font-size: 2rem;
    -webkit-box-pack: center;
    -webkit-justify-content: center;
    -ms-flex-pack: center;
    justify-content: center;
    min-height: 100vh;
    text-align: center;
}
/* stylelint-enable declaration-block-no-duplicate-properties */

/***************
 * Table tweaks.
 ***************/
#KB_main-index.table th,
#KB_main-index.table td {
    vertical-align: middle !important;
}

/* Expand the size of a link to the entire table cell. */
.KB_title-link,

/* This seems to fix two absolutely annoying bugs:
   - It FINALLY fixed the image column width to randomly expand.
   - And also helps to keep the image column width when hiding the sidebar.
*/
th.KB_title {
    width: 100% !important;
    height: 100% !important;
}

/* Style the-"links" as anchors.
 * "Boldify" them.
 * Attempt to expand the clickable area.
 */
.KB_title-link {
    display: inline-block;
    position: relative;
    cursor: pointer;
    color: var(--success);

    /* Above ".KB_title-link:before" so I can select text.*/
    z-index: 1;

    /* For debugging. DO NOT DELETE.*/
    /*border: solid yellow;*/
}

.KB_title-link:hover {
    opacity: 0.75;
    cursor: pointer;
}

.KB_title-link:before {
    content: "";
    position: absolute;
    top: -0.5em;
    left: -0.5em;
    right: -0.5em;
    bottom: -0.5em;
    cursor: pointer;

    /* Bellow ".KB_title-link" so I can select text.*/
    z-index: -1;

    /* For debugging. DO NOT DELETE.*/
    /*border: solid red;*/
}

/* Set a fixed width for the first column (the image) of the table. */
.KB_img-col {
    width: 24px !important;
    min-width: 24px !important;
    max-width: 24px !important;
}

/* Keep the first column of the table (the image) centered. */
.KB_image {
    text-align: center !important;
}

/* Slim a bit the styling of the buttons in the first column. */
.KB_image .btn-sm {
    border-radius: 3px;
    width: 100% !important;
    vertical-align: middle !important;
    padding: 2px 3px;
}

/*****************
 * Sidebar tweaks.
 *****************/
#KB_sidebar-wrapper {
    padding: 0;
    position: fixed;
    left: 0;
    top: 0;
    right: auto;
    min-height: 100%;
    overflow-y: auto;
    white-space: nowrap;
    height: 100%;
    z-index: 10;
}

#KB_sidebar,
#KB_sidebar div {
    padding: 0;
    border: none;
    margin-left: 0;
    background-color: transparent;
}

#KB_sidebar .nav-item {
    width: 100%;
}

#KB_sidebar .nav-link {
    border-radius: 0;
    font-weight: bold;
    text-align: left !important;
}

/* Set a transparent background for sub-categories to easily differentiate them
from categories. */
#KB_sidebar .KB_subcats,
#KB_sidebar .nav-item .KB_toggle-cat-btn:hover,
#KB_sidebar .nav-item .KB_cat-btn:not(.active):hover,
#KB_sidebar .nav-item > .nav-link:not(.active):hover {
    background: rgba(255, 255, 255, 0.075) !important;
}

/* Bigger font size for categories. */
#KB_sidebar .nav-item .nav-link {
    font-size: 1rem !important;
}

/* Smaller font size for sub-categories. */
#KB_sidebar .nav-item .nav-link.KB_sub-cat-link {
    font-size: 0.85rem !important;
}

/* Less padding for categories and sub-categories. */
#KB_sidebar .nav-item .nav-link.KB_cat-btn {
    padding: 0.25rem 0.5rem;
}

#KB_sidebar .nav-item .nav-link.KB_cat-btn.KB_sub-cat-link {
    padding-left: 1.5rem;
}

/* Remove border-radius from the categories that are actually buttons. */
#KB_sidebar .nav-item button.KB_cat-btn,
#KB_sidebar .nav-item button.KB_toggle-cat-btn,
#KB_sidebar .nav-item button.KB_cat-btn:hover,
#KB_sidebar .nav-item button.KB_toggle-cat-btn:hover {
    border-radius: 0 !important;
}

/* Set padding for category icons to separate them from the category name. */
#KB_sidebar .KB_cat-icon {
    padding-right: 5px !important;
}

#KB_sidebar .nav-item .btn-group,
#KB_sidebar .nav-item .btn-group .KB_cat-btn {
    width: 100% !important;
}

#KB_sidebar .KB_toggle-cat-btn[aria-expanded="false"]::before,
#KB_sidebar .KB_toggle-cat-btn[aria-expanded="true"]::before {
    display: inline-block !important;
    width: 0 !important;
    height: 0 !important;
    vertical-align: middle !important;
    content: "" !important;
    border-top: 0.3em solid !important;
    border-right: 0.3em solid transparent !important;
    border-bottom: 0 !important;
    border-left: 0.3em solid transparent !important;
}

#KB_sidebar .KB_toggle-cat-btn[aria-expanded="true"]::before {
    border-top: 0 !important;
    border-right: 0.3em solid transparent !important;
    border-bottom: 0.3em solid !important;
    border-left: 0.3em solid transparent !important;
}

#KB_sidebar .KB_cat-btn:focus,
#KB_sidebar .KB_toggle-cat-btn:focus {
    -webkit-box-shadow: none !important;
    box-shadow: none !important;
}

.navbar-dark button.KB_cat-btn,
.navbar-dark button.KB_toggle-cat-btn.btn::before {
    color: var(--light);
}

.navbar-light button.KB_toggle-cat-btn.btn,
.navbar-light button.KB_toggle-cat-btn.btn::before {
    color: var(--dark);
}

/********
 * Icons.
 ********/
.KB_custom-icon-md::before {
    content: "\f48a" !important;
    font-size: 1.3em !important;
    font-weight: 500 !important;
}

.KB_custom-icon-ext::before {
    content: "\f14c" !important;
    font-size: 1.3em !important;
    font-weight: bold !important;
}

.KB_custom-icon-pdf::before {
    content: "\f411" !important;
    font-size: 1.3em !important;
    font-weight: bold !important;
}

.KB_custom-icon-html::before {
    content: "\f13b" !important;
    font-size: 1.3em !important;
    font-weight: bold !important;
}

.KB_custom-icon-epub::before {
    content: "\fd2c" !important;
    font-size: 1.3em !important;
    font-weight: bold !important;
}

/************************
 * Navigation bar tweaks.
 ************************/

/* NOTE: KB_navbar-button class is a clone of Bootstrap's navbar-toggle class. */
.KB_navbar-button {
    vertical-align: middle !important;
    padding: 0.25rem 0.75rem;
    font-size: 1.5em;
    line-height: 1;
    background-color: transparent;
    border: none;
}

.KB_navbar-button:hover,
.KB_navbar-button:focus {
    text-decoration: none;
    border: none;
}

.KB_navbar-button-icon {
    width: 1.5em;
    height: 1.5em;
    vertical-align: middle;
    content: "";
    background: no-repeat center center;
    -webkit-background-size: 100% 100%;
    background-size: 100% 100%;
}

.navbar-dark .KB_navbar-button {
    color: var(--light);
}

.navbar-light .KB_navbar-button {
    color: var(--dark);
}

/* Set to bold all links on the navigation bar */
#KB_top-navbar .nav-link,
#KB_top-navbar .navbar-brand {
    font-weight: bold !important;
}

/* Set cursor pointers for the "Open file..." and "force reload..." buttons. */
#KB_edit-button,
#KB_reload-button {
    cursor: pointer;
}

#KB_edit-button[disabled],
#KB_reload-button[disabled] {
    cursor: not-allowed;
}

/* Set and allow cursor pointers for the "Clear search input" button */
#KB_clear-search-button.form-control-feedback {
    cursor: pointer;
    pointer-events: auto;
}

/********************
 * Pagination tweaks.
 ********************/

/* Keep the pagination centered. */
div.dataTables_wrapper div.dataTables_paginate:not(#KB_main-index_paginate) ul.pagination {
    -webkit-box-pack: center !important;
    -webkit-justify-content: center !important;
    -ms-flex-pack: center !important;
    justify-content: center !important;
}

/* NOTE: The following three rules are to achieve the following.
 * 1. Place the ".dataTables_info" and ".dataTables_paginate" elements next to each other
 *    at the top of the table index.
 * 2. Keep ".dataTables_info" to the left and ".dataTables_paginate" to the right.
 * 3. Match the ".dataTables_info" padding to the ".dataTables_paginate" padding to compensate
 *    not being able to use "vertical-align" in the ".KB_table-info-pagination-container" element.
 * 4. The elements need to "swap" from next to each other to one over the other when there is no
 * space to fit both next to each other.
 *
 * None of the above can be done with anything that I have tried.
 * - "display: flex;" on ".KB_table-info-pagination-container" can display next to each other and
 *   to the right and left respectively, but cannot be "swapped".
 * - "display: inline-block;" on ".KB_table-info-pagination-container" children can display them
 *   next to each other and can be "swapped", but cannot place them to the left/right.
 *
 * BEWERE: KB_table_info and KB_table_paginate are IDs generated by DataTables based on the table ID.
 * KB_table-info-pagination-container is a class added when defining the "dom" option when
 * creating the DataTables object.
 */

/* Table info and table pagination tweaks. */
.KB_table-info-pagination-container {
    width: 100% !important; /* vertical-align here would make no difference whatsoever since I'm using float. */
}

.KB_table-info-pagination-container > #KB_table_info {
    clear: both; /* Match "pagination" class padding because using "float" sucks.*/
    padding: 0.25rem 0 !important;
    float: left !important;
}

.KB_table-info-pagination-container > #KB_table_paginate {
    float: right !important;
}

/* Because "geniuses" upstream removed this!!!!!
   It seems that they added it back. Keep it just in case. ¬¬ */

/*.KB_action-dropdown-menu > .btn {
white-space: nowrap;
}
*/

@media (max-width: 575px) {
    /* To keep the elements in the same line when they are close to each other on small screens. */
    #KB_top-navbar .container {
        display: contents;
    }
}

@media (max-width: 767px) {
    /* Hide these elements on small screens. They are functionally useless at that sizes. */
    #KB_toggle-sidebar,
    #KB_sidebar-wrapper {
        display: none;
    }
}
